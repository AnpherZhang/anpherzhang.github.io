THREE.OrbitControls=function(a,b){function c(){return 2*J/60/60*K.autoRotateSpeed}function d(){return G(.95,K.zoomSpeed)}function e(a){S.theta-=a}function f(a){S.phi-=a}function g(a){K.object.isPerspectiveCamera?T/=a:K.object.isOrthographicCamera?(K.object.zoom=H(K.minZoom,I(K.maxZoom,K.object.zoom*a)),K.object.updateProjectionMatrix(),V=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),K.enableZoom=!1)}function h(a){K.object.isPerspectiveCamera?T*=a:K.object.isOrthographicCamera?(K.object.zoom=H(K.minZoom,I(K.maxZoom,K.object.zoom/a)),K.object.updateProjectionMatrix(),V=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),K.enableZoom=!1)}function i(a){W.set(a.clientX,a.clientY)}function j(a){aa.set(a.clientX,a.clientY)}function k(a){Z.set(a.clientX,a.clientY)}function l(a){X.set(a.clientX,a.clientY),Y.subVectors(X,W).multiplyScalar(K.rotateSpeed);var b=K.domElement===document?K.domElement.body:K.domElement;e(2*J*Y.x/b.clientHeight),f(2*J*Y.y/b.clientHeight),W.copy(X),K.update()}function m(a){ba.set(a.clientX,a.clientY),ca.subVectors(ba,aa),0<ca.y?g(d()):0>ca.y&&h(d()),aa.copy(ba),K.update()}function n(a){$.set(a.clientX,a.clientY),_.subVectors($,Z).multiplyScalar(K.panSpeed),fa(_.x,_.y),Z.copy($),K.update()}function o(){}function p(a){0>a.deltaY?h(d()):0<a.deltaY&&g(d()),K.update()}function q(a){var b=!1;switch(a.keyCode){case K.keys.UP:fa(0,K.keyPanSpeed),b=!0;break;case K.keys.BOTTOM:fa(0,-K.keyPanSpeed),b=!0;break;case K.keys.LEFT:fa(K.keyPanSpeed,0),b=!0;break;case K.keys.RIGHT:fa(-K.keyPanSpeed,0),b=!0;}b&&(a.preventDefault(),K.update())}function r(a){W.set(a.touches[0].pageX,a.touches[0].pageY)}function s(a){if(K.enableZoom){var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY,d=F(b*b+c*c);aa.set(0,d)}if(K.enablePan){var e=.5*(a.touches[0].pageX+a.touches[1].pageX),f=.5*(a.touches[0].pageY+a.touches[1].pageY);Z.set(e,f)}}function t(a){X.set(a.touches[0].pageX,a.touches[0].pageY),Y.subVectors(X,W).multiplyScalar(K.rotateSpeed);var b=K.domElement===document?K.domElement.body:K.domElement;e(2*J*Y.x/b.clientHeight),f(2*J*Y.y/b.clientHeight),W.copy(X),K.update()}function u(a){if(K.enableZoom){var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY,d=F(b*b+c*c);ba.set(0,d),ca.set(0,G(ba.y/aa.y,K.zoomSpeed)),g(ca.y),aa.copy(ba)}if(K.enablePan){var e=.5*(a.touches[0].pageX+a.touches[1].pageX),f=.5*(a.touches[0].pageY+a.touches[1].pageY);$.set(e,f),_.subVectors($,Z).multiplyScalar(K.panSpeed),fa(_.x,_.y),Z.copy($)}K.update()}function v(){}function w(a){if(!1!==K.enabled){switch(a.preventDefault(),K.domElement.focus?K.domElement.focus():window.focus(),a.button){case K.mouseButtons.LEFT:if(a.ctrlKey||a.metaKey||a.shiftKey){if(!1===K.enablePan)return;k(a),P=O.PAN}else{if(!1===K.enableRotate)return;i(a),P=O.ROTATE}break;case K.mouseButtons.MIDDLE:if(!1===K.enableZoom)return;j(a),P=O.DOLLY;break;case K.mouseButtons.RIGHT:if(!1===K.enablePan)return;k(a),P=O.PAN;}P!==O.NONE&&(document.addEventListener("mousemove",x,!1),document.addEventListener("mouseup",y,!1),K.dispatchEvent(M))}}function x(a){if(!1!==K.enabled)switch(a.preventDefault(),P){case O.ROTATE:if(!1===K.enableRotate)return;l(a);break;case O.DOLLY:if(!1===K.enableZoom)return;m(a);break;case O.PAN:if(!1===K.enablePan)return;n(a);}}function y(a){!1===K.enabled||(o(a),document.removeEventListener("mousemove",x,!1),document.removeEventListener("mouseup",y,!1),K.dispatchEvent(N),P=O.NONE)}function z(a){!1===K.enabled||!1===K.enableZoom||P!==O.NONE&&P!==O.ROTATE||(a.preventDefault(),a.stopPropagation(),K.dispatchEvent(M),p(a),K.dispatchEvent(N))}function A(a){!1===K.enabled||!1===K.enableKeys||!1===K.enablePan||q(a)}function B(a){if(!1!==K.enabled){switch(a.preventDefault(),a.touches.length){case 1:if(!1===K.enableRotate)return;r(a),P=O.TOUCH_ROTATE;break;case 2:if(!1===K.enableZoom&&!1===K.enablePan)return;s(a),P=O.TOUCH_DOLLY_PAN;break;default:P=O.NONE;}P!==O.NONE&&K.dispatchEvent(M)}}function C(a){if(!1!==K.enabled)switch(a.preventDefault(),a.stopPropagation(),a.touches.length){case 1:if(!1===K.enableRotate)return;if(P!==O.TOUCH_ROTATE)return;t(a);break;case 2:if(!1===K.enableZoom&&!1===K.enablePan)return;if(P!==O.TOUCH_DOLLY_PAN)return;u(a);break;default:P=O.NONE;}}function D(a){!1===K.enabled||(v(a),K.dispatchEvent(N),P=O.NONE)}function E(a){!1===K.enabled||a.preventDefault()}var F=Math.sqrt,G=Math.pow,H=Math.max,I=Math.min,J=Math.PI;this.object=a,this.domElement=b===void 0?document:b,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=J,this.minAzimuthAngle=-Infinity,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:THREE.MOUSE.LEFT,MIDDLE:THREE.MOUSE.MIDDLE,RIGHT:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return R.phi},this.getAzimuthalAngle=function(){return R.theta},this.saveState=function(){K.target0.copy(K.target),K.position0.copy(K.object.position),K.zoom0=K.object.zoom},this.reset=function(){K.target.copy(K.target0),K.object.position.copy(K.position0),K.object.zoom=K.zoom0,K.object.updateProjectionMatrix(),K.dispatchEvent(L),K.update(),P=O.NONE},this.update=function(){var b=new THREE.Vector3,d=new THREE.Quaternion().setFromUnitVectors(a.up,new THREE.Vector3(0,1,0)),f=d.clone().inverse(),g=new THREE.Vector3,h=new THREE.Quaternion;return function(){var a=K.object.position;return b.copy(a).sub(K.target),b.applyQuaternion(d),R.setFromVector3(b),K.autoRotate&&P===O.NONE&&e(c()),R.theta+=S.theta,R.phi+=S.phi,R.theta=H(K.minAzimuthAngle,I(K.maxAzimuthAngle,R.theta)),R.phi=H(K.minPolarAngle,I(K.maxPolarAngle,R.phi)),R.makeSafe(),R.radius*=T,R.radius=H(K.minDistance,I(K.maxDistance,R.radius)),K.target.add(U),b.setFromSpherical(R),b.applyQuaternion(f),a.copy(K.target).add(b),K.object.lookAt(K.target),!0===K.enableDamping?(S.theta*=1-K.dampingFactor,S.phi*=1-K.dampingFactor,U.multiplyScalar(1-K.dampingFactor)):(S.set(0,0,0),U.set(0,0,0)),T=1,!!(V||g.distanceToSquared(K.object.position)>Q||8*(1-h.dot(K.object.quaternion))>Q)&&(K.dispatchEvent(L),g.copy(K.object.position),h.copy(K.object.quaternion),V=!1,!0)}}(),this.dispose=function(){K.domElement.removeEventListener("contextmenu",E,!1),K.domElement.removeEventListener("mousedown",w,!1),K.domElement.removeEventListener("wheel",z,!1),K.domElement.removeEventListener("touchstart",B,!1),K.domElement.removeEventListener("touchend",D,!1),K.domElement.removeEventListener("touchmove",C,!1),document.removeEventListener("mousemove",x,!1),document.removeEventListener("mouseup",y,!1),window.removeEventListener("keydown",A,!1)};var K=this,L={type:"change"},M={type:"start"},N={type:"end"},O={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},P=O.NONE,Q=1e-6,R=new THREE.Spherical,S=new THREE.Spherical,T=1,U=new THREE.Vector3,V=!1,W=new THREE.Vector2,X=new THREE.Vector2,Y=new THREE.Vector2,Z=new THREE.Vector2,$=new THREE.Vector2,_=new THREE.Vector2,aa=new THREE.Vector2,ba=new THREE.Vector2,ca=new THREE.Vector2,da=function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixColumn(c,0),a.multiplyScalar(-b),U.add(a)}}(),ea=function(){var a=new THREE.Vector3;return function(b,c){!0===K.screenSpacePanning?a.setFromMatrixColumn(c,1):(a.setFromMatrixColumn(c,0),a.crossVectors(K.object.up,a)),a.multiplyScalar(b),U.add(a)}}(),fa=function(){var a=new THREE.Vector3;return function(b,c){var d=K.domElement===document?K.domElement.body:K.domElement;if(K.object.isPerspectiveCamera){var e=K.object.position;a.copy(e).sub(K.target);var f=a.length();f*=Math.tan(K.object.fov/2*J/180),da(2*b*f/d.clientHeight,K.object.matrix),ea(2*c*f/d.clientHeight,K.object.matrix)}else K.object.isOrthographicCamera?(da(b*(K.object.right-K.object.left)/K.object.zoom/d.clientWidth,K.object.matrix),ea(c*(K.object.top-K.object.bottom)/K.object.zoom/d.clientHeight,K.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),K.enablePan=!1)}}();K.domElement.addEventListener("contextmenu",E,!1),K.domElement.addEventListener("mousedown",w,!1),K.domElement.addEventListener("wheel",z,!1),K.domElement.addEventListener("touchstart",B,!1),K.domElement.addEventListener("touchend",D,!1),K.domElement.addEventListener("touchmove",C,!1),window.addEventListener("keydown",A,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(a){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!a}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(a){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!a}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(a){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!a}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(a){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!a}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(a){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!a}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(a){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=a}}});
